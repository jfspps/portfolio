<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Dr James Apps | BodyBand</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="styles.css">

  </head>
  <body>

    <nav class="navbar navbar-expand-md navbar-light fixed-top" style="background-color:rgb(224, 183, 147);">
    <div class="navbar-brand">Dr James Apps</div>
      
    <!-- collapsable button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
      
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Summaries</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="index.html">Front page</a>
            <a class="dropdown-item" href="SRM.html">Student record management SRM</a>
            <a class="dropdown-item" href="LearningChem.html">LearningChem</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">GitHub repositories</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="https://github.com/jfspps/BodyBandGradle" target="_blank">BodyBand</a>
            <a class="dropdown-item" href="https://github.com/jfspps/SRM-Spring" target="_blank">Student record management (non-secure) SRM</a>
            <a class="dropdown-item" href="https://github.com/jfspps/Secure-SRM" target="_blank">Student record management (Secure-SRM)</a>
            <a class="dropdown-item" href="https://github.com/jfspps/LearningChemDemo" target="_blank">LearningChem</a>
          </div>
        </li>
      </ul>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item active">
          <a class="nav-link" href="mailto:japps@learningchem.co.uk"><i class="fa fa-envelope" aria-hidden="true"></i> Email</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="https://github.com/jfspps" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> GitHub</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="https://www.linkedin.com/in/drjamesapps" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i> LinkedIn</a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="jumbotron pb-1 pt-6" style="background-color:rgb(233, 220, 200);">
    <div class="container">
      <h2>BodyBand</h2>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <figure>
          <img img alt="BodyBand" src="images/BodyBand_exerciseList.png" class="mx-auto img-fluid d-block" style="width: 60%">
        </figure>
      </div>
      <div class="col-md-6">
        <h2>Motivation</h2>
        <h5>Summary last edited 20th Sep 2020</h5>
        <p>
          I found that there were several mobile apps which record free-weight or machine settings but nothing for those who workout with resistance bands. I then set out to build my first Java app, which I would use, while gaining more experience with Java 11. I planned a rough <a href="https://github.com/jfspps/BodyBand/blob/master/docs/Project%20outline.docx" target="_blank">outline</a> of the project before proceeding to code.
        </p>
        <p>
          I have been learning how to write Java 11 from an online beginner's course and applied what I learned to this project. Initially, I framed the project as a mobile application. While it is arguable that I could have written the application in, for example, Kotlin, I wanted to test and showcase my learning in Java.
        </p>
        <h2>Technologies</h2>
          <ul>
            <li>Java 11</li>
            <li>SQLite 3</li>
            <li>JavaFX 11</li>
            <li>JUnit 5</li>
            <li>Gradle 6</li>
            <li>IntelliJ 2020</li>
          </ul>
      </div>
    </div>
      <div class="row">
        <div class="col-md-6">
          <h2>Model and controller</h2>
          <p>
            To put some context about BodyBand in place, a 'repetition' is one movement of weight or band. Normally, one would perform a number of repetitions (or 'reps') in a short time period and then rest before more exercises. Each group of repetitions is known as a 'set'.
          </p>
          <p>
            Planning for greater independence between units, I built the model around three classes, <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbExercise.java" target="_blank">bbExercise</a>, <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbRepetition.java" target="_blank">bbRepetition</a> and <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbSet.java" target="_blank">bbSet</a>. A GUI representation of the database fields available is shown opposite, in this case, for bbExercise. The id field can only be edited in SQLite. The user can edit database entries on this page but is expected to use a different, more informal page (shown later).
          </p>
          <p>
            The controller for BodyBand is represented by <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabase.java" target="_blank">bbDatabase</a>. At the beginning of the class, I use private final Strings to set a few constant database field indices and then proceed to list the SQL queries as PreparedStatements. One important area which the course advised to look out for are SQL injection attacks, so implementing PreparedStatements which only recognise a limited set of data input was desired. Each PreparedStatement is associated with the SQL query string and then instantiated by open(). Resources are released with close(), both of which are defined in the <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/Main.java" target="_blank">main class</a>.
          </p>
          <p>
            The remaining bbDatabase methods process data from the model classes in preparation for the viewer. In hindsight, I would probably look into breaking up <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabase.java" target="_blank">bbDatabase</a> such that it handles each model class individually (exercise, set and repetition). There are three major sections which facilitate CRUD type operations. Retrieval starts from <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabase.java#L273" target="_blank">line 273</a> and insertion starts from <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabase.java#L992" target="_blank">line 992</a>. Deletion methods start from <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabase.java#L1269" target="_blank">line 1269</a>.
          </p>
          <p>
            A bootstrap class which initialises some data for demonstration purposes is provided by <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbSQLiteDB.java" target="_blank">bbSQLiteDB.java</a>.
          </p>
          
        </div>
        <div class="col-md-6">
          <figure>
            <img img alt="BodyBand" src="images/BodyBand_editEx.png" class="mx-auto img-fluid d-block" style="width: 80%">
          </figure>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <figure>
            <img img alt="BodyBand" src="images/BodyBand_editSet2.png" class="mx-auto img-fluid d-block" style="width: 90%">
          </figure>
        </div>
        
        <div class="col-md-6">
          <h2>Repetition string or repString</h2>
          <p>
            One challenging point, which is easier to explain fully as opposed to summarise here, is related to database design. Each exercise is characterised by two statistics: band tension and number of repetitions. Starting from the band tension, it is easy to store and retrieve different band tensions for an exercise because there are limited number of tensions, usually about six bands with different tensions. I would potentially have one exercise record for each tension, so at most, six records. Continuing, how would I also record the number of repetitions? I could store an exercise record with a different tension and a different number of repetitions. A user may 'go heavy' and record between one and four repetitions, or 'go lighter' and record anywhere up to 30 repetitions. Coupling both tension with repetition count leads to around 6*30, or 180 exercise records per set. A user may perform about three sets, and perhaps about five different exercises. In total, this is about 6*30*3*5 records per workout (i.e. per day). A lot of the repetition sequences would be repeated across different exercises or different workouts. To minimise database access, I designed a string, which I refer to as a 'repString' that states, for a given set, how many repetitions were completed. An example of this is shown opposite: "R_1_2_".
          </p>
          <p>
            The repString "R_1_2_" is read left-to-right and means there was one repetition followed by two repetitions for a given exercise. It does not say what the tension was and could apply to any tension (or exercise or workout). The repString is stored in the database and mapped (one-to-many) to any set which applies to it. My personal experience shows that a lot of repetition patterns are reasonably constant, that is, users generally aim to workout within the same repetition sequence (the same repString) and change band tensions. This approach reduces the number of database records and more importantly, the number of queries made.
          </p>
          <p>
            Parsing of the 'repString' is handled outside of the database, with <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabase.java#L657" target="_blank">getRepListFromRepString()</a>, line 657, returning a List<>() of repetitions. Methods which validate repString are defined by <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabase.java#L591" target="_blank">checkRepString()</a>, line 591 and methods which create a repString, <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabase.java#L619" target="_blank">buildRepString()</a>, line 619, are handled independently. The effective removal of one or more of the numbers in the string is handled by <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabase.java#L632" target="_blank">deleteRep()</a>, line 632. Individual values can be updated using <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabase.java#L749" target="_blank">updateRepString()</a>, line 749. Normally, the user would not interact with repString directly and instead change values without knowing about repString.
          </p>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <h2>Unit testing</h2>
          <p>
            BodyBand was also the first project where I learned about unit testing and at the time I focused on testing <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/model/bbDatabaseTest2.java" target="_blank">bbDatabase</a>. The test results revealed problems with my code that I eventually addressed.
          </p>
          <p>
            What I found helpful was to return messages to the console with println(), usually after a database query and within try-catch blocks. These techniques, coupled with lots of forum searching, helped me resolve problems.
          </p>
          
          <h2>The FXML viewer</h2>
          <p>
            One notable difference which I found was how different authors and online tutorials approach the use of FXML. Some build controls (buttons, forms etc.) from a Java class whereas others write the FXML controls into the FXML file and then reference individual controls by ID from a java class. I followed the latter approach.  Unless one wants to change the look of a control at run-time, to me the latter approach looks like a cleaner, more independent approach.
          </p>
          <p>
            The figure opposite is intended to function on a touch-screen device and as you can see hides all of the underlying logic from the user. Compare this to the figure above for 'bent-over rowing'. The update and delete buttons are enabled only if a record or database entry is selected. When writing FXML files, I usually combined SceneBuilder with manual FXML file writing.
          </p>
          <p>
            One other major challenge I had to overcome was the rendering of different scenes. The online course I followed only built applications with one scene. Related to the above, some of the literature does explain multiple scene handling but usually by approaching FXML controls via java classes, which is not what I wanted to follow. Overall, after careful choice of static variables, I eventually overcame the problem by sending new scenes to the same stage, as shown <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/Main.java#L14" target="_blank">here</a>. All of the different scenes are defined in a separate class, <a href="https://github.com/jfspps/BodyBand/blob/master/src/sample/sceneNavigation.java" target="_blank">sceneNavigation</a>.
          </p>
        </div>
        <div class="col-md-6">
          <figure>
            <img img alt="BodyBand" src="images/BodyBand_newSet1.png" class="mx-auto img-fluid d-block" style="width: 80%">
          </figure>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <figure>
            <img img alt="BodyBand" src="images/BodyBand_repHistory.png" class="mx-auto img-fluid d-block" style="width: 60%">
          </figure>
        </div>
        
        <div class="col-md-6">
          <h2>Concluding remarks and take-away lessons</h2>
          <p>
            At this stage, BodyBand is in a functional state. I would think that all projects can receive improvements or more features and in the end what is implemented depends on the resources available. For instance, after further testing, BodyBand could be extended with more features (some are listed on the repository's <a href="https://github.com/jfspps/BodyBand" target="_blank">front page</a>). 
          </p>
          <p>
            The Gradle build also includes automated and verifiable testing with CircleCI, a tool I learned about when developing my Student Record Management suite.
          </p>
          <p>
            Most of the challenging areas were addressed or explained after I revisited the online course material, searched online forums and Java books. 
          </p>
          <p>
            In summary, the development process has revealed a number of new areas of improvement. Taking the time to plan the model is definitely worth the effort. Unit testing revealed a number of missing statements and fragments, which were recitified thereafter. Finding solutions or ideas to problems required a significant amount of forum searching. This coupled with ongoing changes to the technologies added to the challenge of writing code. Some commits only involved a few lines of code but also required most of the day to research. This is a reality which I have come to accept. 
          </p>
        </div>
      </div>
    <hr>
  </div>
  
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
</body>
</html>
